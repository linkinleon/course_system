<!DOCTYPE html>
<html>
<head>
    <title></title>
    <% include header.ejs %>
</head>
<body>
<div class="container" id="userContainer">

    <div class="modal fade" id="deleteUserModal" style="display: none">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">删除用户</h4>
                </div>
                <div class="modal-body">
                    <strong>确定要删除该用户吗？</strong></br>
                </div>
                <div class="modal-footer">
                    <button type="button" id='deleteUserOK' class="btn btn-primary">确定</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                </div>
            </div><!-- delete/.modal-content -->
        </div><!-- delete/.modal-dialog -->
    </div><!-- delete/.modal -->

    <div class="modal fade" id="authUserModal" style="display: none">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">用户授权</h4>
                </div>
                <div class="modal-body">
                    <strong>确定要更改用户的权限吗？</strong></br>
                </div>
                <div class="modal-footer">
                    <button type="button" id='authUserOK' class="btn btn-primary">确定</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                </div>
            </div><!-- authorize/.modal-content -->
        </div><!-- authorize/.modal-dialog -->
    </div><!-- authorize/.modal -->

<table class="table table-hover" id="courseTable">
    <thead>
    <th>用户名称</th>
    <th>邮件地址</th>
    <th>存储Id</th>
    <th>用户角色</th>
    <th>操作</th>
    </thead>
    <tbody id="courseBody">
    <% allUsers.forEach(function(user){ %>
    <tr id="<%=user._id %>"><td style="width: 20%">
            <%=user.username %>
        </td><td style="width: 20%">
            <%=user.email %>
        </td><td style="width: 20%">
            <%=user._id %>
        </td><td style="width: 20%"><% if(user.role == 1){%>管理员<%}if(user.role == 0){%>普通用户<%}%></td>
        <td style="width: 20%">
            <% if(currentUserId != user._id){%>
                <button type="button" class="btn btn-default btn-xs">
                    <span class="glyphicon glyphicon-user" style="font-size: 20px"></span>
                </button>
                <button type="button" class="btn btn-default btn-xs" >
                    <span class="glyphicon glyphicon-remove-circle" style="font-size: 20px"></span>
                </button>
            <%}%>
        </td></tr>
    <%});%>
    </tbody>
</table>
</div>
<script src="/javascripts/userManagementHandler.js"></script>
</body>
</html>